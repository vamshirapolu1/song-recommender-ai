<!DOCTYPE html>
<html>
<head>
<title>Song Recommender AI</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>

/* EXISTING CODE UNCHANGED ABOVE */

/* ADD: mood theme colors */

body.happy{
background:
radial-gradient(circle at 10% 20%, #064e3b, transparent 40%),
radial-gradient(circle at 90% 80%, #022c22, transparent 40%),
#022c22;
}

body.sad{
background:
radial-gradient(circle at 10% 20%, #1e3a8a, transparent 40%),
radial-gradient(circle at 90% 80%, #020617, transparent 40%),
#020617;
}

body.energetic{
background:
radial-gradient(circle at 10% 20%, #7f1d1d, transparent 40%),
radial-gradient(circle at 90% 80%, #020617, transparent 40%),
#020617;
}

body.chill{
background:
radial-gradient(circle at 10% 20%, #4c1d95, transparent 40%),
radial-gradient(circle at 90% 80%, #020617, transparent 40%),
#020617;
}

/* ADD: popup player */

.player-modal{

display:none;
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:rgba(0,0,0,0.85);
justify-content:center;
align-items:center;
z-index:999;

}

.player-box{

width:70%;
height:70%;
background:black;
border-radius:15px;

}

.player-close{

position:absolute;
top:20px;
right:30px;
font-size:30px;
cursor:pointer;

}

/* ADD: quote dropdown */

.quote{
display:none;
margin-top:10px;
color:#cbd5e1;
font-size:14px;
}

.quote-btn{
cursor:pointer;
margin-left:10px;
}

</style>

</head>

<body class="{{ detected_mood|lower if detected_mood }}">

<a href="/" class="logo">ðŸŽµ Song Recommender AI</a>

<div class="hero">

<h1>Discover Music by Mood</h1>

<p>Describe your emotion. AI will recommend perfect songs.</p>

</div>

<form method="POST">

<div class="search-box">

<input name="message" placeholder="How are you feeling today?" required>

<select name="language">

<option value="All" {% if selected_language=='All' %}selected{% endif %}>All Languages</option>
<option value="English" {% if selected_language=='English' %}selected{% endif %}>English</option>
<option value="Hindi" {% if selected_language=='Hindi' %}selected{% endif %}>Hindi</option>
<option value="Telugu" {% if selected_language=='Telugu' %}selected{% endif %}>Telugu</option>

</select>

<!-- ADD: audio/video toggle -->

<select name="mode">
<option value="video">Video Mode</option>
<option value="audio">Audio Mode</option>
</select>

<button>Recommend</button>

</div>

</form>

{% if detected_mood %}

<div class="container">

<div class="section-title">

ðŸ”¥ Top 5 Picks for {{detected_mood}}

<!-- ADD: confidence -->
{% if confidence %}
<span style="font-size:14px;color:#94a3b8;margin-left:15px;">
Confidence: {{confidence}}%
</span>
{% endif %}

</div>

<div class="grid">

{% for song in top_songs %}

<a href="#" onclick="playSong('{{song.link}}');return false;">

<div class="card">

<div class="rank">#{{loop.index}}</div>

<img src="{{song.thumbnail}}">

<div class="card-body">

<div class="title">
{{song.song_name}}

<!-- ADD: quote toggle -->
<span class="quote-btn" onclick="toggleQuote(event,'q{{loop.index}}')">â–¼</span>

</div>

<div class="artist">{{song.artist}} â€¢ {{song.language}}</div>

<div id="q{{loop.index}}" class="quote">
{{song.quote}}
</div>

</div>

</div>

</a>

{% endfor %}

</div>

</div>

{% endif %}

{% if other_songs %}

<div class="container">

<div class="section-title">ðŸŽ¶ Other songs you may like</div>

{% for song in other_songs %}

<a href="#" onclick="playSong('{{song.link}}');return false;">

<div class="other-item">

<div class="left">

<div class="number">{{loop.index + 5}}</div>

<div>

<div>
{{song.song_name}}

<span class="quote-btn" onclick="toggleQuote(event,'o{{loop.index}}')">â–¼</span>

</div>

<div class="artist">{{song.artist}} â€¢ {{song.language}}</div>

<div id="o{{loop.index}}" class="quote">
{{song.quote}}
</div>

</div>

</div>

<div class="play">â–¶</div>

</div>

</a>

{% endfor %}

</div>

{% endif %}

<!-- ADD: PLAYER -->

<div id="playerModal" class="player-modal">

<div class="player-close" onclick="closePlayer()">âœ•</div>

<div class="player-box">

<iframe id="playerFrame" width="100%" height="100%" allow="autoplay"></iframe>

</div>

</div>

<script>

/* ADD: player logic */

function getID(url){

if(url.includes("v="))
return url.split("v=")[1].split("&")[0];

if(url.includes("youtu.be/"))
return url.split("youtu.be/")[1].split("?")[0];

}

function playSong(url){

var id=getID(url);

document.getElementById("playerModal").style.display="flex";

document.getElementById("playerFrame").src=
"https://www.youtube.com/embed/"+id+"?autoplay=1";

}

function closePlayer(){

document.getElementById("playerModal").style.display="none";
document.getElementById("playerFrame").src="";

}

/* ADD: quote toggle */

function toggleQuote(e,id){

e.stopPropagation();

var el=document.getElementById(id);

el.style.display=el.style.display==="block"?"none":"block";

}

</script>

</body>
</html>