<!DOCTYPE html>
<html>
<head>
<title>Song Recommender AI</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>

*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:'Poppins',sans-serif;
}

/* DEFAULT THEME */

body{

background:
radial-gradient(circle at 10% 20%, #1f1f47, transparent 40%),
radial-gradient(circle at 90% 80%, #020617, transparent 40%),
#020617;

color:white;
padding:40px;
}

/* MOOD THEMES */

body.happy{
background:
radial-gradient(circle at 10% 20%, #064e3b, transparent 40%),
radial-gradient(circle at 90% 80%, #022c22, transparent 40%),
#022c22;
}

body.sad{
background:
radial-gradient(circle at 10% 20%, #1e3a8a, transparent 40%),
radial-gradient(circle at 90% 80%, #020617, transparent 40%),
#020617;
}

body.energetic{
background:
radial-gradient(circle at 10% 20%, #7f1d1d, transparent 40%),
radial-gradient(circle at 90% 80%, #020617, transparent 40%),
#020617;
}

body.chill{
background:
radial-gradient(circle at 10% 20%, #4c1d95, transparent 40%),
radial-gradient(circle at 90% 80%, #020617, transparent 40%),
#020617;
}

/* CLICKABLE LOGO */

.logo{
font-size:34px;
font-weight:700;
background:linear-gradient(90deg,#ff4d6d,#a855f7);
-webkit-background-clip:text;
color:transparent;
text-decoration:none;
}

/* HERO */

.hero{
text-align:center;
margin:40px 0;
}

.hero h1{
font-size:48px;
font-weight:700;
background:linear-gradient(90deg,#ffffff,#a5b4fc);
-webkit-background-clip:text;
color:transparent;
}

.hero p{
color:#94a3b8;
margin-top:8px;
}

/* SEARCH */

.search-box{
display:flex;
align-items:center;
background:rgba(255,255,255,0.05);
border-radius:60px;
padding:8px;
border:1px solid rgba(255,255,255,0.1);
gap:15px;
margin-bottom:30px;
}

.search-box input{
flex:1;
background:none;
border:none;
color:white;
padding:16px;
font-size:16px;
outline:none;
}

.search-box select{
background:rgba(15,23,42,0.8);
color:white;
border:none;
padding:14px 18px;
border-radius:40px;
cursor:pointer;
font-weight:500;
border:1px solid rgba(255,255,255,0.1);
}

.search-box button{
background:linear-gradient(90deg,#a855f7,#ff4d6d);
border:none;
color:white;
padding:14px 30px;
border-radius:40px;
cursor:pointer;
font-weight:600;
}

/* GLASS CONTAINER */

.container{
background:rgba(255,255,255,0.05);
border-radius:20px;
padding:30px;
border:1px solid rgba(255,255,255,0.1);
margin-bottom:30px;
}

/* TITLE */

.section-title{
font-size:22px;
margin-bottom:20px;
font-weight:600;
}

/* GRID */

.grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
gap:20px;
}

/* CARD */

.card{
background:rgba(255,255,255,0.05);
border-radius:16px;
overflow:hidden;
transition:0.3s;
position:relative;
border:1px solid rgba(255,255,255,0.1);
cursor:pointer;
}

.card:hover{
transform:translateY(-6px);
box-shadow:0 0 30px rgba(168,85,247,0.5);
}

.card img{
width:100%;
height:140px;
object-fit:cover;
}

.card-body{
padding:15px;
}

.title{
font-weight:600;
}

.artist{
color:#94a3b8;
font-size:14px;
}

.rank{
position:absolute;
top:10px;
left:10px;
background:#ff4d6d;
padding:4px 10px;
border-radius:12px;
font-size:12px;
font-weight:600;
}

/* OTHER LIST */

.other-item{
display:flex;
justify-content:space-between;
align-items:center;
background:rgba(255,255,255,0.05);
padding:16px;
border-radius:12px;
margin-bottom:10px;
border:1px solid rgba(255,255,255,0.1);
transition:0.3s;
cursor:pointer;
}

.other-item:hover{
transform:translateX(8px);
box-shadow:0 0 20px rgba(168,85,247,0.5);
}

.left{
display:flex;
gap:15px;
}

.number{
color:#ff4d6d;
font-weight:600;
width:25px;
}

.play{
color:#ff4d6d;
font-size:18px;
}

/* QUOTE DROPDOWN */

.quote{
display:none;
font-size:13px;
color:#cbd5e1;
margin-top:5px;
}

/* PLAYER MODAL */

.player-modal{
display:none;
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:rgba(0,0,0,0.9);
justify-content:center;
align-items:center;
z-index:999;
}

.player-box{
width:70%;
height:70%;
}

.close{
position:absolute;
top:20px;
right:40px;
font-size:30px;
cursor:pointer;
}

</style>

</head>

<body class="{{ detected_mood|lower if detected_mood }}">

<a href="/" class="logo">ðŸŽµ Song Recommender AI</a>

<div class="hero">
<h1>Discover Music by Mood</h1>
<p>Describe your emotion. AI will recommend perfect songs.</p>
</div>

<form method="POST">
<div class="search-box">

<input name="message" placeholder="How are you feeling today?" required>

<select name="language">
<option value="All">All Languages</option>
<option value="English">English</option>
<option value="Hindi">Hindi</option>
<option value="Telugu">Telugu</option>
</select>

<select name="mode">
<option value="video">Video</option>
<option value="audio">Audio</option>
</select>

<button>Recommend</button>

</div>
</form>

{% if detected_mood %}

<div class="container">

<div class="section-title">

ðŸ”¥ Top 5 Picks for {{detected_mood}}

{% if confidence %}
<span style="font-size:14px;color:#94a3b8;margin-left:15px;">
Confidence: {{confidence}}%
</span>
{% endif %}

</div>

<div class="grid">

{% for song in top_songs %}

<div class="card" onclick="playSong('{{song.link}}')">

<div class="rank">#{{loop.index}}</div>

<img src="{{song.thumbnail}}">

<div class="card-body">

<div class="title">
{{song.song_name}}
<span onclick="toggleQuote(event,'q{{loop.index}}')" style="cursor:pointer;">â–¼</span>
</div>

<div class="artist">{{song.artist}}</div>

<div id="q{{loop.index}}" class="quote">
{{song.quote}}
</div>

</div>

</div>

{% endfor %}

</div>

</div>

{% endif %}

<div id="playerModal" class="player-modal">

<div class="close" onclick="closePlayer()">âœ•</div>

<div class="player-box">

<iframe id="playerFrame" width="100%" height="100%" allow="autoplay"></iframe>

</div>

</div>

<script>

function getID(url){

if(url.includes("v="))
return url.split("v=")[1].split("&")[0];

if(url.includes("youtu.be/"))
return url.split("youtu.be/")[1].split("?")[0];
}

function playSong(url){

var id=getID(url);

var mode="{{mode}}";

var playerURL="https://www.youtube.com/embed/"+id+"?autoplay=1";

if(mode==="audio"){
playerURL+="&controls=1";
}

document.getElementById("playerModal").style.display="flex";
document.getElementById("playerFrame").src=playerURL;
}


function closePlayer(){

document.getElementById("playerModal").style.display="none";

document.getElementById("playerFrame").src="";
}

function toggleQuote(e,id){

e.stopPropagation();

var el=document.getElementById(id);

el.style.display=el.style.display==="block"?"none":"block";
}

</script>

</body>
</html>