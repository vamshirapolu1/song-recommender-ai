<!DOCTYPE html>
<html>
<head>
    <title>Song Recommender AI</title>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            margin: 0;

            /* upgraded font globally */
            font-family: 'Poppins', sans-serif;

            /* BRIGHTER BACKGROUND */
            background: radial-gradient(circle at top left, #2c2c54, #1f1f3d);

            color: #eaeaf0;
            padding: 60px 80px;

            transition: background 0.5s ease;
        }

        /* MOOD THEMES FOR DYNAMIC BG */
        body.mood-happy { background: radial-gradient(circle, #2d5a27, #1e3c1a); }
        body.mood-sad { background: radial-gradient(circle, #2c2c54, #1a1a2e); }
        body.mood-energetic { background: radial-gradient(circle, #7b1111, #4a0a0a); }
        body.mood-party { background: radial-gradient(circle, #450439, #ff0055); }

        /* TITLE HEADER */
        .header {

            font-family: 'Poppins', sans-serif;

            font-size: 38px;
            font-weight: 700;

            margin-bottom: 50px;

            letter-spacing: 0.6px;
        }

        /* CLICKABLE HOME LINK */
        .home-link {

            text-decoration: none;

            background: linear-gradient(45deg, #ff4d6d, #ff8fa3);

            background-clip: text;
            -webkit-background-clip: text;

            color: transparent;
            -webkit-text-fill-color: transparent;

            font-weight: 700;
            letter-spacing: 1px;

            animation: titleGlow 3s ease-in-out infinite alternate;

            transition: 0.3s;
        }

        .home-link:hover {

            background: linear-gradient(45deg, #ff2e63, #ff4d6d);

            background-clip: text;
            -webkit-background-clip: text;

            color: transparent;
            -webkit-text-fill-color: transparent;

            animation: titleGlowHover 1.5s ease-in-out infinite alternate;
        }


        .home-link:hover {

            background: linear-gradient(45deg, #ff2e63, #ff4d6d);

            background-clip: text;              /* add this */
            -webkit-background-clip: text;

            color: transparent;                 /* add this */
            -webkit-text-fill-color: transparent;

            text-shadow:
                0 0 10px rgba(255,77,109,0.5),
                0 0 20px rgba(255,77,109,0.3);
        }


        /* 3RD POINT: GLASSMORPHISM WRAPPER */
        .wrapper {

            background: rgba(59, 59, 130, 0.4); 

            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);

            padding: 40px;

            border-radius: 25px;

            box-shadow:
                0 0 40px rgba(0,0,0,0.5),
                0 0 80px rgba(0,0,0,0.25);

            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .section-title {
            font-size: 22px;
            margin-bottom: 25px;
            color: #ffffff;
            font-weight: 600;
        }

        /* TOP GRID - SINGLE ROW VERSION */

        .top-grid {
            display: flex;
            flex-wrap: nowrap;
            gap: 20px;
            margin-bottom: 50px;
            overflow-x: auto;
            padding-bottom: 15px;
            scroll-behavior: smooth;
        }

        .top-grid::-webkit-scrollbar {
            height: 6px;
        }

        .top-grid::-webkit-scrollbar-thumb {
            background: rgba(255, 77, 109, 0.5);
            border-radius: 10px;
        }

        .song-card {

            background: rgba(42, 42, 94, 0.6);

            border-radius: 18px;

            flex: 0 0 calc(20% - 16px);
            min-width: 220px;

            transition: 0.3s ease;

            position: relative;

            border: 1px solid rgba(255,255,255,0.08);

            overflow: hidden;
        }

        .song-card img {
            width: 100%;
            height: 135px;
            object-fit: cover;
            border-bottom: 2px solid #ff4d6d;
        }

        .song-card a {
            text-decoration: none;
            color: white;
        }

        .card-content {
            padding: 20px;
        }

        .song-title {

            font-size: 17px;

            font-weight: 600;

            color: #ffffff;

            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .song-artist {

            font-size: 14px;

            color: #c9c9d9;

            margin-top: 6px;
        }

        .song-card:hover {

            transform: translateY(-6px);

            box-shadow:
                0 0 15px rgba(255, 46, 99, 0.9),
                0 0 35px rgba(255, 46, 99, 0.6),
                0 0 60px rgba(255, 46, 99, 0.4);
        }

        /* RANK BADGE */

        .rank-badge {

            position: absolute;

            top: 10px;

            left: 10px;

            background: rgba(255, 77, 109, 0.9);

            color: white;

            padding: 2px 10px;

            border-radius: 10px;

            font-size: 12px;

            font-weight: bold;

            z-index: 5;
        }

        /* 2ND POINT: TRENDING BUTTONS */
        .trending-container { 
            display: flex; 
            flex-wrap: wrap; 
            gap: 10px; 
            margin: 20px 0 40px 0; 
        }

        .trend-btn {
            background: rgba(255, 255, 255, 0.1); 
            border: 1px solid rgba(255,255,255,0.2);
            color: white; 
            padding: 8px 18px; 
            border-radius: 20px; 
            cursor: pointer;
            font-family: 'Poppins'; 
            font-size: 14px; 
            transition: 0.3s;
        }

        .trend-btn:hover { 
            background: #ff4d6d; 
            border-color: #ff4d6d; 
        }


        /* OTHER SONGS SECTION */

        .other-title {

            font-size: 18px;

            margin-bottom: 15px;

            color: #ffffff;

            font-weight: 600;
        }

        .other-list {

            display: flex;

            flex-direction: column;

            gap: 14px;

            margin-bottom: 40px;
        }

        .other-item {

            background: rgba(37, 37, 84, 0.5);

            padding: 16px 20px;

            border-radius: 12px;

            transition: 0.25s ease;

            border: 1px solid rgba(255,255,255,0.06);
        }

        .other-item:hover {

            transform: translateX(8px);

            background: rgba(255, 77, 109, 0.1);

            box-shadow:
                0 0 20px rgba(255,46,99,0.5),
                0 0 35px rgba(255,46,99,0.3);
        }

        .other-item a {

            text-decoration: none;

            color: white;

            font-size: 15px;

            display: flex;

            justify-content: space-between;

            align-items: center;
        }

        .other-left {

            display: flex;

            gap: 14px;
        }

        .other-rank {

            color: #ff4d6d;

            font-weight: bold;

            width: 26px;
        }

        .other-info {

            color: #c9c9d9;

            font-size: 14px;
        }

        /* INPUT SECTION */

        .input-section {

            display: flex;

            gap: 20px;

            margin-top: 30px;

            background: #f1f1f1;

            padding: 5px;

            border-radius: 40px;

            align-items: center;
        }

        input {

            flex: 1;

            padding: 18px;

            border-radius: 40px;

            border: none;

            font-size: 15px;

            outline: none;

            background: transparent;

            color: black;

            font-family: 'Poppins', sans-serif;
        }

        select {
            padding: 0 20px;
            border: none;
            background: transparent;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            border-left: 1px solid #ccc;
            cursor: pointer;
            outline: none;
        }

        button {

            padding: 16px 35px;

            border-radius: 40px;

            border: none;

            background: linear-gradient(45deg, #ff2e63, #ff4d6d);

            color: white;

            font-weight: 600;

            font-family: 'Poppins', sans-serif;

            cursor: pointer;

            transition: 0.3s;
        }

        button:hover {

            transform: scale(1.05);

            box-shadow:
                0 0 15px rgba(255,77,109,0.7),
                0 0 30px rgba(255,77,109,0.5);
        }

        /* 3RD POINT: LOADING SPINNER */
        #loading { 
            display: none; 
            text-align: center; 
            margin-top: 20px; 
            color: #ff4d6d; 
            font-weight: 600; 
        }

        .empty-text {

            color: #c9c9d9;

            font-size: 16px;
        }

        /* MOBILE */
        @keyframes titleGlow {

    from {
        text-shadow:
            0 0 8px rgba(255,77,109,0.4),
            0 0 18px rgba(255,77,109,0.25);
    }

    to {
        text-shadow:
            0 0 16px rgba(255,77,109,0.7),
            0 0 32px rgba(255,77,109,0.4);
    }
}

@keyframes titleGlowHover {

    from {
        text-shadow:
            0 0 12px rgba(255,46,99,0.6),
            0 0 24px rgba(255,46,99,0.4);
    }

    to {
        text-shadow:
            0 0 22px rgba(255,46,99,1),
            0 0 45px rgba(255,46,99,0.6);
    }
}

        /* 4TH POINT: MOBILE OPTIMIZATION */
        @media (max-width: 900px)
        {
            body {
                padding: 20px;
            }

            .header {
                font-size: 28px;
                margin-bottom: 30px;
                text-align: center;
            }

            .wrapper {
                padding: 20px;
            }

            .top-grid {
                gap: 15px;
            }

            .song-card {
                min-width: 160px;
                flex: 0 0 160px;
            }

            .song-card img {
                height: 100px;
            }

            .song-title {
                font-size: 14px;
            }

            .input-section {
                flex-direction: column;
                border-radius: 20px;
                gap: 0;
            }

            input {
                width: 100%;
                text-align: center;
                border-bottom: 1px solid #ccc;
                border-radius: 0;
            }

            select {
                border-left: none;
                width: 100%;
                padding: 15px;
                text-align: center;
            }

            button {
                width: 100%;
                border-radius: 0 0 20px 20px;
            }
        }

    </style>
</head>

<body class="mood-{{ detected_mood | lower if detected_mood else 'default' }}">

<div class="header">
    <a href="/" class="home-link">ðŸŽµ Song Recommender AI</a>
</div>

<div class="wrapper">

{% if not detected_mood %}
    <div class="section-title">How are you feeling right now?</div>
    <div class="trending-container">
        <button class="trend-btn" onclick="setMood('I am feeling very happy')">Happy ðŸ˜Š</button>
        <button class="trend-btn" onclick="setMood('I am feeling so sad')">Sad ðŸ˜¢</button>
        <button class="trend-btn" onclick="setMood('Need some gym motivation')">Gym âš¡</button>
        <button class="trend-btn" onclick="setMood('Just want to relax')">Chill ðŸ§˜</button>
        <button class="trend-btn" onclick="setMood('Ready to party')">Party ðŸ¥³</button>
    </div>
{% endif %}

{% if detected_mood %}

<div class="section-title">
ðŸ”¥ Top 5 Picks for {{ detected_mood }}
</div>

<div class="top-grid">
{% for song in top_songs %}
<div class="song-card">

<div class="rank-badge">#{{ loop.index }}</div>

<a href="{{ song.link }}" target="_blank">

<img src="{{ song.thumbnail }}" alt="Cover">

<div class="card-content">

<div class="song-title">{{ song.song_name }}</div>

<div class="song-artist">
{{ song.artist }} â€¢ {{ song.language }}
</div>

</div>

</a>

</div>
{% endfor %}
</div>

{% if other_songs %}

<div class="other-title">
ðŸŽ¶ Other songs you may like
</div>

<div class="other-list">

{% for song in other_songs %}

<div class="other-item">

<a href="{{ song.link }}" target="_blank">

<div class="other-left">

<div class="other-rank">
{{ loop.index + 5 }}
</div>

<div>
<div>{{ song.song_name }}</div>

<div class="other-info">
{{ song.artist }} â€¢ {{ song.language }}
</div>

</div>

</div>

<div style="color:#ff4d6d;font-size:18px;">
â–¶
</div>

</a>

</div>

{% endfor %}

</div>

{% endif %}

{% else %}

<div class="empty-text">
Tell me how you're feeling and I'll suggest songs ðŸŽ§
</div>

{% endif %}

<form method="POST" id="moodForm" class="input-section" onsubmit="showLoading()">

<input type="text" id="moodInput" name="message" placeholder="How are you feeling?" required>

<select name="language">
    <option value="All" {% if selected_language == 'All' %}selected{% endif %}>All Languages</option>
    <option value="Telugu" {% if selected_language == 'Telugu' %}selected{% endif %}>Telugu</option>
    <option value="Hindi" {% if selected_language == 'Hindi' %}selected{% endif %}>Hindi</option>
    <option value="English" {% if selected_language == 'English' %}selected{% endif %}>English</option>
</select>

<button type="submit">
Recommend
</button>

</form>

<div id="loading">Searching for the perfect vibe... ðŸŽ§</div>

</div>

<script>
    function setMood(text) {
        document.getElementById('moodInput').value = text;
        showLoading();
        document.getElementById('moodForm').submit();
    }
    function showLoading() {
        document.getElementById('loading').style.display = 'block';
    }
</script>

</body>
</html>